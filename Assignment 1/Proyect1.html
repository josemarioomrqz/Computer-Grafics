<!doctype html>
<html>
   <body>
      <canvas width = "570" height = "570" id = "my_Canvas"></canvas>

      
     
      
      <script>
         /*============== Creating a canvas ====================*/
         var canvas = document.getElementById('my_Canvas');
         gl = canvas.getContext('experimental-webgl') || canvas.getContext("webgl");
      
         /*======== Defining and storing the geometry ===========*/

        
         // Vertices for 7 rectangles (building, roof, tennis court, three windows, door)
         var vertices = [ 
            // Main building (brick red)
            
            -0.25, -0.55, 0.0,
            -0.25,  0.25, 0.0,
             0.95,  0.25, 0.0,
             0.95, -0.55, 0.0,
            

            // Roof (brick red)
            -0.10, 0.25, 0.0,
            -0.10, 0.38, 0.0,
             0.80, 0.38, 0.0,
             0.80, 0.25, 0.0,

            

            // Tennis court (green)
            -1.00, -0.60, 0.0,
            -1.00,  0.00, 0.0,
            -0.30,  0.00, 0.0,
            -0.30, -0.60, 0.0,

         
            // Men's Bathroom door 1
             0.32, -0.55, 0.0,
             0.32, -0.20, 0.0,
             0.45, -0.20, 0.0,
             0.45, -0.55, 0.0,

            // Women's Bathroom door 2
             0.52, -0.55, 0.0,
             0.52, -0.20, 0.0,
             0.65, -0.20, 0.0,
             0.65, -0.55, 0.0,

            // Tennis Banner
             0.12, 0.02, 0.0,
             0.12, 0.20, 0.0,
             0.70, 0.20, 0.0,
             0.70, 0.02, 0.0,

            // Shed Door (darker grey)
             0.12, -0.55, 0.0,
             0.12, -0.15, 0.0,
             0.27, -0.15, 0.0,
             0.27, -0.55, 0.0,
         ];

         // Indices for rectangles (two triangles each)
         var indices = [
            // Main building
            0,1,2,
            0,2,3,
            4,5,6,
            
            4,6,7,
            8,9,10,
            8,10,11,

            12,13,14,
            12,14,15,
            16,17,18,

            16,18,19,
            20,21,22,
            20,22,23,

            24,25,26,
            24,26,27
         ]

         /* Defining a color for each vertex */
            var colors = [
                // Main building (brick red)
                0.80, 0.25, 0.25,
                0.80, 0.25, 0.25,
                0.80, 0.25, 0.25,
                0.80, 0.25, 0.25,

                // Roof (brick red)
                0.80, 0.25, 0.25,
                0.80, 0.25, 0.25,
                0.80, 0.25, 0.25,
                0.80, 0.25, 0.25,

                // Tennis outside-court (green)
                0.10, 0.55, 0.20,
                0.10, 0.55, 0.20,
                0.10, 0.55, 0.20,
                0.10, 0.55, 0.20,

                

                // Men's Bathroom door (grey)
                0.70, 0.70, 0.72,
                0.70, 0.70, 0.72,
                0.70, 0.70, 0.72,
                0.70, 0.70, 0.72,

                // Women's Bathroom door (grey)
                0.70, 0.70, 0.72, 
                0.70, 0.70, 0.72,
                0.70, 0.70, 0.72,
                0.70, 0.70, 0.72,

                // Tennis Banner (white)
                1.00, 1.00, 1.00,
                1.00, 1.00, 1.00,
                1.00, 1.00, 1.00,
                1.00, 1.00, 1.00,

                // Shed Door (darker grey)
                0.45, 0.45, 0.48,
                0.45, 0.45, 0.48,
                0.45, 0.45, 0.48,
                0.45, 0.45, 0.48
            ];
         

         // Create an empty buffer object to store vertex buffer
         var vertex_buffer = gl.createBuffer();

         // Bind appropriate array buffer to it
         gl.bindBuffer(gl.ARRAY_BUFFER, vertex_buffer);
         
         // Pass the vertex data to the buffer
         gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);

         // Create an empty buffer object to store color buffer 
         var color_buffer = gl.createBuffer();

         // Bind appropriate array for the color buffer
         gl.bindBuffer(gl.ARRAY_BUFFER, color_buffer);

         // Pass the color data to the buffer 
         gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(colors), gl.STATIC_DRAW);

         // Create a buffer for the indices of the vertices
         var index_buffer = gl.createBuffer();

         // Bind appropriate array buffer to it
         gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, index_buffer);

         // Pass the vertex data to the buffer
         gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(indices), gl.STATIC_DRAW);


         /*================ Shaders ====================*/
         
         // Vertex shader source code
         var vertCode =
               'attribute vec3 coordinates;' +
               'attribute vec3 color;' +
               'varying vec3 vColor;' +
               'void main(void) {' +
                  'gl_Position = vec4(coordinates, 1.0);' +
                  'vColor = color;' +
               '}';
            
         // Create a vertex shader object
         var vertShader = gl.createShader(gl.VERTEX_SHADER);

         // Attach vertex shader source code
         gl.shaderSource(vertShader, vertCode);

         // Compile the vertex shader
         gl.compileShader(vertShader);

         //fragment shader source code
         var fragCode =
            'precision mediump float;' +
            'varying vec3 vColor;' +
            'void main(void) {' +
               'gl_FragColor = vec4(vColor, 1.0);' +
            '}';
            
         // Create fragment shader object
         var fragShader = gl.createShader(gl.FRAGMENT_SHADER);

         // Attach fragment shader source code
         gl.shaderSource(fragShader, fragCode); 
         
         // Compile the fragmentt shader
         gl.compileShader(fragShader);

         // Create a shader program object to store
         // the combined shader program
         var shaderProgram = gl.createProgram();

         // Attach a vertex shader
         gl.attachShader(shaderProgram, vertShader);

         // Attach a fragment shader
         gl.attachShader(shaderProgram, fragShader);

         // Link both the programs
         gl.linkProgram(shaderProgram);

         // Use the combined shader program object
         gl.useProgram(shaderProgram);

         // Position attributes 
         var coordLocation = gl.getAttribLocation(shaderProgram, "coordinates");
         gl.bindBuffer(gl.ARRAY_BUFFER, vertex_buffer);
         gl.vertexAttribPointer(coordLocation, 3, gl.FLOAT, false, 0, 0);
         gl.enableVertexAttribArray(coordLocation);

         // Color attributes
         var colorLocation = gl.getAttribLocation(shaderProgram, "color");
         gl.bindBuffer(gl.ARRAY_BUFFER, color_buffer);
         gl.vertexAttribPointer(colorLocation, 3, gl.FLOAT, false, 0, 0);
         gl.enableVertexAttribArray(colorLocation);

         //Bind index buffer before drawing
         gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, index_buffer);

         // Clear the canvas before we start drawing on it.
         gl.clearColor(0.5, 0.5, 0.5, 0.9);
         gl.clear(gl.COLOR_BUFFER_BIT);
         gl.viewport(0,0,canvas.width,canvas.height);
         gl.drawElements(gl.TRIANGLES, indices.length, gl.UNSIGNED_SHORT,0);


      
         //Update the color buffer with new colors
         gl.bindBuffer(gl.ARRAY_BUFFER, color_buffer);
         gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(colors), gl.STATIC_DRAW);
         gl.clear(gl.COLOR_BUFFER_BIT);
         gl.drawElements(gl.TRIANGLES, indices.length, gl.UNSIGNED_SHORT,0);

        

      </script>
    </body>
</html>
